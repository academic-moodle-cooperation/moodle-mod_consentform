{"version":3,"file":"checkboxclicked.min.js","sources":["../src/checkboxclicked.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/.\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle. If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Add or remove the restriction of a course module when checkbox is clicked\r\n *\r\n * @package\r\n * @subpackage mod_consentform\r\n * @copyright 2019 Thomas Niedermaier (thomas.niedermaier@meduniwien.ac.at)\r\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\n/**\r\n * @module mod_consentform/checkboxclicked\r\n */\r\ndefine(['jquery', 'core/config'], function($, config) {\r\n        /**\r\n          * @constructor\r\n          * @alias module:mod_consentform/checkboxclicked\r\n          */\r\n         var Checkboxclicked = function() {\r\n            this.cmid = \"\";\r\n         };\r\n\r\n         var instance = new Checkboxclicked();\r\n\r\n         instance.init = function(param) {\r\n\r\n            instance.cmid = param.cmid;\r\n\r\n            /**\r\n             * Response indicator\r\n             *\r\n             * @param {string} val\r\n             * @param {bool} checked\r\n             */\r\n             function response(val, checked) {\r\n                 if (checked) {\r\n                     $(\":checkbox[value=\" + val + \"]\").parent().parent().css(\"background-color\", \"lightgreen\");\r\n                 } else {\r\n                     $(\":checkbox[value=\" + val + \"]\").parent().parent().css(\"background-color\", \"lightgrey\");\r\n                 }\r\n             }\r\n\r\n            /**\r\n            * Make ajax call to setcontrol.php page to store if the activity shall be controlled by\r\n            * this consentform instance.\r\n            *\r\n            * @param {bool} ischecked\r\n            * @param {string} value\r\n            */\r\n            function transmitcheckboxclicked(ischecked, value) {\r\n\r\n                $.get(config.wwwroot + '/mod/consentform/setcontrol.php', {\r\n                    sesskey: config.sesskey,\r\n                    ischecked: encodeURI(ischecked),\r\n                    value: encodeURI(value),\r\n                    cmid: instance.cmid\r\n                    }, 'json').done(function(data) {\r\n                        if (data == 1 && ischecked) {\r\n                            response(value, 1);\r\n                        } else if (data == 2 && !ischecked) {\r\n                            response(value, 0);\r\n                        }\r\n                    });\r\n            }\r\n\r\n            /**\r\n            * Calls ajax-call function if checkbox is clicked\r\n            */\r\n            function checkboxclicked() {\r\n                var ischecked = $(this).is(':checked');\r\n                var value = $(this).val();\r\n                transmitcheckboxclicked(ischecked, value);\r\n            }\r\n\r\n            $('.selectcoursemodule').on('click', checkboxclicked);\r\n\r\n         };\r\n\r\n        return instance;\r\n\r\n    }\r\n);"],"names":["define","$","config","instance","cmid","init","param","response","val","checked","parent","css","on","ischecked","value","get","wwwroot","sesskey","encodeURI","done","data","transmitcheckboxclicked","this","is"],"mappings":";;;;;;;;AA2BAA,OAAM,kCAAC,CAAC,SAAU,gBAAgB,SAASC,EAAGC,QAKrC,IAIIC,SAAW,IAJO,WACdC,KAAAA,KAAO,IA2DhB,OAtDCD,SAASE,KAAO,SAASC,OAUrB,SAASC,SAASC,IAAKC,SACfA,QACAR,EAAE,mBAAqBO,IAAM,KAAKE,SAASA,SAASC,IAAI,mBAAoB,cAE5EV,EAAE,mBAAqBO,IAAM,KAAKE,SAASA,SAASC,IAAI,mBAAoB,aAZrFR,SAASC,KAAOE,MAAMF,KAgDtBH,EAAE,uBAAuBW,GAAG,SAN5B,YAnBA,SAAiCC,UAAWC,OAExCb,EAAEc,IAAIb,OAAOc,QAAU,kCAAmC,CACtDC,QAASf,OAAOe,QAChBJ,UAAWK,UAAUL,WACrBC,MAAOI,UAAUJ,OACjBV,KAAMD,SAASC,MACZ,QAAQe,MAAK,SAASC,MACT,GAARA,MAAaP,UACbN,SAASO,MAAO,GACD,GAARM,MAAcP,WACrBN,SAASO,MAAO,MAW5BO,CAFgBpB,EAAEqB,MAAMC,GAAG,YACftB,EAAEqB,MAAMd,WAQrBL"}