{"version":3,"file":"checkboxclicked.min.js","sources":["../src/checkboxclicked.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/.\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle. If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Add or remove the restriction of a course module when checkbox is clicked\n *\n * @package\n * @subpackage mod_consentform\n * @copyright 2019 Thomas Niedermaier (thomas.niedermaier@meduniwien.ac.at)\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module mod_consentform/checkboxclicked\n */\ndefine(['jquery', 'core/config'], function($, config) {\n        /**\n          * @constructor\n          * @alias module:mod_consentform/checkboxclicked\n          */\n         var Checkboxclicked = function() {\n            this.cmid = \"\";\n         };\n\n         var instance = new Checkboxclicked();\n\n         instance.init = function(param) {\n\n            instance.cmid = param.cmid;\n\n            /**\n             * Response indicator\n             *\n             * @param {string} val\n             * @param {bool} checked\n             */\n             function response(val, checked) {\n                 if (checked) {\n                     $(\":checkbox[value=\" + val + \"]\").parent().parent().css(\"background-color\", \"lightgreen\");\n                 } else {\n                     $(\":checkbox[value=\" + val + \"]\").parent().parent().css(\"background-color\", \"lightgrey\");\n                 }\n             }\n\n            /**\n            * Make ajax call to setcontrol.php page to store if the activity shall be controlled by\n            * this consentform instance.\n            *\n            * @param {bool} ischecked\n            * @param {string} value\n            */\n            function transmitcheckboxclicked(ischecked, value) {\n\n                $.get(config.wwwroot + '/mod/consentform/setcontrol.php', {\n                    sesskey: config.sesskey,\n                    ischecked: encodeURI(ischecked),\n                    value: encodeURI(value),\n                    cmid: instance.cmid\n                    }, 'json').done(function(data) {\n                        if (data == 1 && ischecked) {\n                            response(value, 1);\n                        } else if (data == 2 && !ischecked) {\n                            response(value, 0);\n                        }\n                    });\n            }\n\n            /**\n            * Calls ajax-call function if checkbox is clicked\n            */\n            function checkboxclicked() {\n                var ischecked = $(this).is(':checked');\n                var value = $(this).val();\n                transmitcheckboxclicked(ischecked, value);\n            }\n\n            $('.selectcoursemodule').on('click', checkboxclicked);\n\n         };\n\n        return instance;\n\n    }\n);"],"names":["define","$","config","instance","cmid","init","param","response","val","checked","parent","css","on","ischecked","value","get","wwwroot","sesskey","encodeURI","done","data","transmitcheckboxclicked","this","is"],"mappings":";;;;;;;;AA2BAA,yCAAO,CAAC,SAAU,gBAAgB,SAASC,EAAGC,YASjCC,SAAW,IAJO,gBACdC,KAAO,WAKfD,SAASE,KAAO,SAASC,gBAUZC,SAASC,IAAKC,SACfA,QACAR,EAAE,mBAAqBO,IAAM,KAAKE,SAASA,SAASC,IAAI,mBAAoB,cAE5EV,EAAE,mBAAqBO,IAAM,KAAKE,SAASA,SAASC,IAAI,mBAAoB,aAZrFR,SAASC,KAAOE,MAAMF,KAgDtBH,EAAE,uBAAuBW,GAAG,8BAzBKC,UAAWC,OAExCb,EAAEc,IAAIb,OAAOc,QAAU,kCAAmC,CACtDC,QAASf,OAAOe,QAChBJ,UAAWK,UAAUL,WACrBC,MAAOI,UAAUJ,OACjBV,KAAMD,SAASC,MACZ,QAAQe,MAAK,SAASC,MACT,GAARA,MAAaP,UACbN,SAASO,MAAO,GACD,GAARM,MAAcP,WACrBN,SAASO,MAAO,MAW5BO,CAFgBpB,EAAEqB,MAAMC,GAAG,YACftB,EAAEqB,MAAMd,WAQrBL"}