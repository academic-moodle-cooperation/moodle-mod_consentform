{"version":3,"sources":["../src/checkboxclicked.js"],"names":["define","$","config","log","instance","Checkboxclicked","cmid","init","param","response","val","checked","parent","css","transmitcheckboxclicked","ischecked","value","get","wwwroot","sesskey","encodeURI","done","data","debug","on","is"],"mappings":"AA2BAA,OAAM,yCACF,CAAC,QAAD,CAAW,aAAX,CAA0B,UAA1B,CADE,CACqC,SAASC,CAAT,CAAYC,CAAZ,CAAoBC,CAApB,CAAyB,IAUvDC,CAAAA,CAAQ,CAAG,GAJO,SAAlBC,CAAAA,eAAkB,EAAW,CAC9B,KAAKC,IAAL,CAAY,EACd,CAR0D,CAY3DF,CAAQ,CAACG,IAAT,CAAgB,SAASC,CAAT,CAAgB,CAE7BJ,CAAQ,CAACE,IAAT,CAAgBE,CAAK,CAACF,IAAtB,CAQC,QAASG,CAAAA,CAAT,CAAkBC,CAAlB,CAAuBC,CAAvB,CAAgC,CAC5B,GAAIA,CAAJ,CAAa,CACTV,CAAC,CAAC,mBAAqBS,CAArB,CAA2B,GAA5B,CAAD,CAAkCE,MAAlC,GAA2CA,MAA3C,GAAoDC,GAApD,CAAwD,kBAAxD,CAA4E,YAA5E,CACH,CAFD,IAEO,CACHZ,CAAC,CAAC,mBAAqBS,CAArB,CAA2B,GAA5B,CAAD,CAAkCE,MAAlC,GAA2CA,MAA3C,GAAoDC,GAApD,CAAwD,kBAAxD,CAA4E,WAA5E,CACH,CACJ,CASF,QAASC,CAAAA,CAAT,CAAiCC,CAAjC,CAA4CC,CAA5C,CAAmD,CAE/Cf,CAAC,CAACgB,GAAF,CAAMf,CAAM,CAACgB,OAAP,CAAiB,iCAAvB,CAA0D,CACtDC,OAAO,CAAEjB,CAAM,CAACiB,OADsC,CAEtDJ,SAAS,CAAEK,SAAS,CAACL,CAAD,CAFkC,CAGtDC,KAAK,CAAEI,SAAS,CAACJ,CAAD,CAHsC,CAItDV,IAAI,CAAEF,CAAQ,CAACE,IAJuC,CAA1D,CAKO,MALP,EAKee,IALf,CAKoB,SAASC,CAAT,CAAe,CAC3B,GAAY,CAAR,EAAAA,CAAI,EAASP,CAAjB,CAA4B,CACxBN,CAAQ,CAACO,CAAD,CAAQ,CAAR,CACX,CAFD,IAEO,IAAY,CAAR,EAAAM,CAAI,EAAS,CAACP,CAAlB,CAA6B,CAChCN,CAAQ,CAACO,CAAD,CAAQ,CAAR,CACX,CAFM,IAEA,CACHb,CAAG,CAACoB,KAAJ,CAAUD,CAAV,CACH,CACJ,CAbL,CAcH,CAWDrB,CAAC,CAAC,qBAAD,CAAD,CAAyBuB,EAAzB,CAA4B,OAA5B,CANA,UAA2B,IACnBT,CAAAA,CAAS,CAAGd,CAAC,CAAC,IAAD,CAAD,CAAQwB,EAAR,CAAW,UAAX,CADO,CAEnBT,CAAK,CAAGf,CAAC,CAAC,IAAD,CAAD,CAAQS,GAAR,EAFW,CAGvBI,CAAuB,CAACC,CAAD,CAAYC,CAAZ,CAC1B,CAED,CAEF,CAtDD,CAwDD,MAAOZ,CAAAA,CAEV,CAvEC,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/.\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle. If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @package\r\n * @subpackage consentform\r\n * @copyright 2019 Thomas Niedermaier (thomas.niedermaier@meduniwien.ac.at)\r\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\n/**\r\n * Add or remove the restriction of a course module when checkbox is clicked\r\n */\r\n\r\n\r\ndefine(\r\n    ['jquery', 'core/config', 'core/log'], function($, config, log) {\r\n         /**\r\n          * @constructor\r\n          * @alias module:mod_consentform/checkboxclicked\r\n          */\r\n\r\n         var Checkboxclicked = function() {\r\n            this.cmid = \"\";\r\n         };\r\n\r\n         var instance = new Checkboxclicked();\r\n\r\n         instance.init = function(param) {\r\n\r\n            instance.cmid = param.cmid;\r\n\r\n            /**\r\n             * Response indicator\r\n             *\r\n             * @param {string} val\r\n             * @param {bool} checked\r\n             */\r\n             function response(val, checked) {\r\n                 if (checked) {\r\n                     $(\":checkbox[value=\" + val + \"]\").parent().parent().css(\"background-color\", \"lightgreen\");\r\n                 } else {\r\n                     $(\":checkbox[value=\" + val + \"]\").parent().parent().css(\"background-color\", \"lightgrey\");\r\n                 }\r\n             }\r\n\r\n            /**\r\n            * Make ajax call to setcontrol.php page to store if the activity shall be controlled by\r\n            * this consentform instance.\r\n            *\r\n            * @param {bool} ischecked\r\n            * @param {string} value\r\n            */\r\n            function transmitcheckboxclicked(ischecked, value) {\r\n\r\n                $.get(config.wwwroot + '/mod/consentform/setcontrol.php', {\r\n                    sesskey: config.sesskey,\r\n                    ischecked: encodeURI(ischecked),\r\n                    value: encodeURI(value),\r\n                    cmid: instance.cmid\r\n                    }, 'json').done(function(data) {\r\n                        if (data == 1 && ischecked) {\r\n                            response(value, 1);\r\n                        } else if (data == 2 && !ischecked) {\r\n                            response(value, 0);\r\n                        } else {\r\n                            log.debug(data);\r\n                        }\r\n                    });\r\n            }\r\n\r\n            /**\r\n            * What happens when a course module checkbox is clicked\r\n            */\r\n            function checkboxclicked() {\r\n                var ischecked = $(this).is(':checked');\r\n                var value = $(this).val();\r\n                transmitcheckboxclicked(ischecked, value);\r\n            }\r\n\r\n            $('.selectcoursemodule').on('click', checkboxclicked);\r\n\r\n         };\r\n\r\n        return instance;\r\n\r\n    }\r\n);\r\n"],"file":"checkboxclicked.min.js"}