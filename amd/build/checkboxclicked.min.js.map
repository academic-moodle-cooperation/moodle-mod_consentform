{"version":3,"sources":["../src/checkboxclicked.js"],"names":["define","$","config","instance","Checkboxclicked","cmid","init","param","response","val","checked","parent","css","transmitcheckboxclicked","ischecked","value","get","wwwroot","sesskey","encodeURI","done","data","on","is"],"mappings":"AA0BAA,OAAM,mCAAC,CAAC,QAAD,CAAW,aAAX,CAAD,CAA4B,SAASC,CAAT,CAAYC,CAAZ,CAAoB,IASzCC,CAAAA,CAAQ,CAAG,GAJO,SAAlBC,CAAAA,eAAkB,EAAW,CAC9B,KAAKC,IAAL,CAAY,EACd,CAP4C,CAW7CF,CAAQ,CAACG,IAAT,CAAgB,SAASC,CAAT,CAAgB,CAE7BJ,CAAQ,CAACE,IAAT,CAAgBE,CAAK,CAACF,IAAtB,CAQC,QAASG,CAAAA,CAAT,CAAkBC,CAAlB,CAAuBC,CAAvB,CAAgC,CAC5B,GAAIA,CAAJ,CAAa,CACTT,CAAC,CAAC,mBAAqBQ,CAArB,CAA2B,GAA5B,CAAD,CAAkCE,MAAlC,GAA2CA,MAA3C,GAAoDC,GAApD,CAAwD,kBAAxD,CAA4E,YAA5E,CACH,CAFD,IAEO,CACHX,CAAC,CAAC,mBAAqBQ,CAArB,CAA2B,GAA5B,CAAD,CAAkCE,MAAlC,GAA2CA,MAA3C,GAAoDC,GAApD,CAAwD,kBAAxD,CAA4E,WAA5E,CACH,CACJ,CASF,QAASC,CAAAA,CAAT,CAAiCC,CAAjC,CAA4CC,CAA5C,CAAmD,CAE/Cd,CAAC,CAACe,GAAF,CAAMd,CAAM,CAACe,OAAP,CAAiB,iCAAvB,CAA0D,CACtDC,OAAO,CAAEhB,CAAM,CAACgB,OADsC,CAEtDJ,SAAS,CAAEK,SAAS,CAACL,CAAD,CAFkC,CAGtDC,KAAK,CAAEI,SAAS,CAACJ,CAAD,CAHsC,CAItDV,IAAI,CAAEF,CAAQ,CAACE,IAJuC,CAA1D,CAKO,MALP,EAKee,IALf,CAKoB,SAASC,CAAT,CAAe,CAC3B,GAAY,CAAR,EAAAA,CAAI,EAASP,CAAjB,CAA4B,CACxBN,CAAQ,CAACO,CAAD,CAAQ,CAAR,CACX,CAFD,IAEO,IAAY,CAAR,EAAAM,CAAI,EAAS,CAACP,CAAlB,CAA6B,CAChCN,CAAQ,CAACO,CAAD,CAAQ,CAAR,CACX,CACJ,CAXL,CAYH,CAWDd,CAAC,CAAC,qBAAD,CAAD,CAAyBqB,EAAzB,CAA4B,OAA5B,CANA,UAA2B,IACnBR,CAAAA,CAAS,CAAGb,CAAC,CAAC,IAAD,CAAD,CAAQsB,EAAR,CAAW,UAAX,CADO,CAEnBR,CAAK,CAAGd,CAAC,CAAC,IAAD,CAAD,CAAQQ,GAAR,EAFW,CAGvBI,CAAuB,CAACC,CAAD,CAAYC,CAAZ,CAC1B,CAED,CAEF,CApDD,CAsDD,MAAOZ,CAAAA,CAEV,CAnEC,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/.\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle. If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Add or remove the restriction of a course module when checkbox is clicked\n *\n * @package   mod_consentform\n * @copyright 2019 Thomas Niedermaier (thomas.niedermaier@meduniwien.ac.at)\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module mod_consentform/checkboxclicked\n */\ndefine(['jquery', 'core/config'], function($, config) {\n        /**\n          * @constructor\n          * @alias module:mod_consentform/checkboxclicked\n          */\n         var Checkboxclicked = function() {\n            this.cmid = \"\";\n         };\n\n         var instance = new Checkboxclicked();\n\n         instance.init = function(param) {\n\n            instance.cmid = param.cmid;\n\n            /**\n             * Response indicator\n             *\n             * @param {string} val\n             * @param {bool} checked\n             */\n             function response(val, checked) {\n                 if (checked) {\n                     $(\":checkbox[value=\" + val + \"]\").parent().parent().css(\"background-color\", \"lightgreen\");\n                 } else {\n                     $(\":checkbox[value=\" + val + \"]\").parent().parent().css(\"background-color\", \"lightgrey\");\n                 }\n             }\n\n            /**\n            * Make ajax call to setcontrol.php page to store if the activity shall be controlled by\n            * this consentform instance.\n            *\n            * @param {bool} ischecked\n            * @param {string} value\n            */\n            function transmitcheckboxclicked(ischecked, value) {\n\n                $.get(config.wwwroot + '/mod/consentform/setcontrol.php', {\n                    sesskey: config.sesskey,\n                    ischecked: encodeURI(ischecked),\n                    value: encodeURI(value),\n                    cmid: instance.cmid\n                    }, 'json').done(function(data) {\n                        if (data == 1 && ischecked) {\n                            response(value, 1);\n                        } else if (data == 2 && !ischecked) {\n                            response(value, 0);\n                        }\n                    });\n            }\n\n            /**\n            * Calls ajax-call function if checkbox is clicked\n            */\n            function checkboxclicked() {\n                var ischecked = $(this).is(':checked');\n                var value = $(this).val();\n                transmitcheckboxclicked(ischecked, value);\n            }\n\n            $('.selectcoursemodule').on('click', checkboxclicked);\n\n         };\n\n        return instance;\n\n    }\n);"],"file":"checkboxclicked.min.js"}